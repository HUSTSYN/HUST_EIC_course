# OperatingSystem-EX1

                                 操作系统实验一  进程管理
                                 
一、 实验目的

1. 掌握进程的概念，理解进程创建过程，能够使用系统调用完成进程创建，形成多个进 程并发的环境。

2. 掌握进程控制方法。通过调用相关的系统调用，对进程实现睡眠、同步、撤销等控制。

3. 进一步认识并发执行的实质，分析进程竞争资源的现象，学习解决进程互斥的方法。 

二、 实验环境 

操作系统：任何 Unix/Linux 或 MAC

编译器： gcc

三、 实验内容

1、使用进程管理命令，如 ps，kill 等，监视和控制进程的活动。

2、应用编程——哲学家进餐问题 问题描述：五位哲学家围坐在一个圆桌周围，每人面前有一个碗，各碗之间分别有一根筷子，餐桌如下图。
 
哲学家的生活包括两种活动：吃面条和思考。当哲学家感到饥饿时，他就分两次去取 他左边和右边的筷子，每次拿一根（不能强行从邻座手中抢过筷子），如果成功，他就开 始吃面条，吃完后把筷子放回原处继续思考。 

参考给定的头文件和信号量封装函数文件，使用 C 语言编写 Linux 控制台程序，对并 发环境下 5 位哲学家进餐过程进行演示。 

问题分析：这是一个典型的对抗死锁的问题，涉及操作系统中的互斥和同步、死锁和饥饿。 可以采用以下方法解决： 

(1) 最多只允许 4 个哲学家同时进餐，保证有一人能够进餐。 

(2) 仅当左、右两支筷子均可用时，才允许他拿起筷子。 

(3) 奇数号哲学家先拿左边的筷子，偶数号先拿右边的筷子。 这里采用第一种方法。 

Linux 提供信号量操作的函数接口使用起来不够直观简便，需要对其进行一些封装。经 过封装，提供 5 个操作：信号量的创建、信号量的赋值、P 操作、V 操作、信号量的删除。 在此基础上，在主函数中使用 fork 创建 5 个进程，模拟 5 个哲学家，用 5 个信号量来模拟 5 只筷子。

四、 实验步骤

1、进程管理控制命令使用范例

1)	执行ps命令，查看bash进程的PID。

2)	在后台运行一个yes进程：yes > /dev/null & 用ps -f命令观察yes进程的pid和ppid，用ps u命令观察yes进程的状态。yes进程的父进程是哪个进程？ 

3)	根据命令名搜索特定的进程：ps -ef | grep yes

4)	用kill命令杀掉yes进程：kill ?  其中“?”为 yes进程的PID。

2、应用编程——哲学家进餐

原理：至多只允许四个哲学家同时进餐,以保证至少有一个哲学家能够进餐,最终总会释放出他所使用过的两支筷子,从而可使更多的哲学家进餐。以下将room 作为信号量，只允许4 个哲学家同时进入餐厅就餐，这样就能保证至少有一个哲学家可以就餐，根据FIFO 的原则，总会进入到餐厅就餐，因此不会出现饿死和死锁的现象。
                                 
